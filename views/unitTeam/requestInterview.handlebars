{{> unitTeamTemplate}}

{{#if resident}}
    <main id="main" class="main">
        <div class="pagetitle">
            <h1 class="text-capitalize">Workforce Interview Request - {{jobApplicant.companyName}}</h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item active">PI Scheduling</li>
                </ol>
            </nav>
        </div><!-- End Page Title -->

        <section class="section profile">

            {{!-- Resident info card --}}
            <div class="row">

                <div class="col-12">
                    <div class="card">
                        <div class="card-body profile-card pt-4 d-flex flex-column align-items-center">
                            <img src="/assets/img/avatar.png" alt="Profile" class="rounded-circle">
                            <h2 class="text-capitalize">{{resident.firstName}} {{resident.lastName}}
                            </h2>
                            <h2 class="text-capitalize mb-3">#{{resident.residentID}}</h2>
                            <h3>KDOC Resident</h3>
                        </div>
                    </div>
                </div>

                {{!-- Schedule Section --}}


                <div class="col-12">
                    <div class="card">
                        <div class="card-body pt-3">
                            {{!-- is interview already scheduled? --}}
                            {{#if application.interview.dateScheduled}}
                                <h5 class="text-success text-center mt-3">This interview has been scheduled for
                                    {{formatDate
                            application.interview.dateScheduled}} @ {{application.interview.time}}.
                                </h5>

                            {{else}}
                                {{#if application.interview.dateRequested}}
                                    <div class="card">
                                        {{!-- Schedule Form --}}
                                        <form method="POST" action="/unitTeam/scheduleInterview/{{application._id}}">
                                            <div class="card-body">
                                                <h5 class="card-title mt-3">Review and schedule workforce interview with
                                                    resident.
                                                </h5>

                                                <hr>

                                                <p>Interview Requested on
                                                    {{formatDate application.interview.dateRequested}}.
                                                </p>
                                                <hr>
                                                <div class="row mb-3">
                                                    <label for="instructions" class="col-12 col-form-label">Scheduling
                                                        Preferences from Employer:</label>
                                                    <div class="col-12">
                                                        <textarea disabled class="form-control text-capitalize"
                                                            style="height: 100px" name="instructions"
                                                            placeholder="No Preferences">{{application.interview.preferredDate}}</textarea>
                                                    </div>
                                                </div>
                                                <div class="row mb-3">
                                                    <label for="instructions" class="col-12 col-form-label">Instructions
                                                        from
                                                        Employer:</label>
                                                    <div class="col-12">
                                                        <textarea disabled class="form-control text-capitalize"
                                                            style="height: 100px" name="instructions"
                                                            placeholder="No Preferences">{{application.interview.employerInstructions}}</textarea>
                                                    </div>
                                                </div>

                                                <hr>

                                                {{!-- Name --}}
                                                <div class="row mb-3">
                                                    <label for="name" class="col-sm-2 col-form-label">Resident</label>
                                                    <div class="col-sm-10">
                                                        <input required type="text" class="form-control text-capitalize"
                                                            readonly
                                                            value="{{resident.firstName}} {{resident.lastName}}">
                                                    </div>
                                                </div>
                                                {{!-- ID --}}
                                                <div class="row mb-3">
                                                    <label for="name" class="col-sm-2 col-form-label">ID #</label>
                                                    <div class="col-sm-10">
                                                        <input required type="text" class="form-control"
                                                            name="residentID" readonly value="{{resident.residentID}}">
                                                    </div>
                                                </div>
                                                {{!-- Facility --}}
                                                <div class="row mb-3">
                                                    <label for="name" class="col-sm-2 col-form-label">Facility</label>
                                                    <div class="col-sm-10">
                                                        <input required type="text" class="form-control text-capitalize"
                                                            name="facility" readonly value="{{resident.facility}}">
                                                    </div>
                                                </div>

                                                <hr>
                                                {{!-- Date to Schedule --}}
                                                <div class="row mb-3">
                                                    <label for="date" class="col-sm-2 col-form-label">Date</label>
                                                    <div class="col-sm-10">
                                                        <input required type="date" class="form-control" name="date">
                                                    </div>
                                                </div>
                                                {{!-- Time --}}
                                                <div class="row mb-3">
                                                    <label for="time" class="col-sm-2 col-form-label">Time</label>
                                                    <div class="col-sm-10">
                                                        <input required type="time" class="form-control" name="time">
                                                    </div>
                                                </div>
                                                {{!-- instructions --}}
                                                <div class="row mb-3">
                                                    <label for="instructions" class="col-12 col-form-label">Additional
                                                        Instructions
                                                        for
                                                        Resident:</label>
                                                    <div class="col-12">
                                                        <textarea class="form-control" style="height: 100px"
                                                            name="instructions" placeholder="optional"></textarea>
                                                    </div>
                                                </div>


                                                <div class="d-flex justify-content-between mt-3">
                                                    <a href="/unitTeam/cancelInterviewRequest/{{application._id}}">
                                                        <button type="button"
                                                            class="btn btn-danger btn-block mb-2 ms-auto">Deny
                                                            Interview</button></a>

                                                    <button type="submit"
                                                        class="btn btn-info btn-block mb-2 ms-auto">Schedule
                                                        Interview</button>
                                                </div>
                                            </div>
                                    </div>


                                    </form>
                                {{else}}
                                    <h5 class="text-success text-center mt-3">This interview has been cancelled by Unit
                                        Team.</h5>
                                {{/if}}
                            {{/if}}

                        </div>
                    </div>
                </div>
            </div>
            </div>
        </section>
    </main><!-- End #main -->
{{else}}
    <main id="main" class="main">
        <div class="pagetitle">
            <h1 class="text-capitalize">Workforce Interview Request </h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item active">PI Scheduling</li>
                </ol>
            </nav>
        </div><!-- End Page Title -->
        <section class="section profile">

            {{!-- Resident info card --}}
            <div class="row">

                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title text-center text-warning">This request is closed.</h3>
                        </div>
                    </div>
                </div>
            </div>

        </section>
    </main>

{{/if}}
<!-- ======= Footer ======= -->
{{> footer}}

{{> arrowUp}}