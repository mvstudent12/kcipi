{{> employerTemplate}}


<main id="main" class="main">

    <div class="pagetitle">
        <h1>Resident Profile</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/employer/dashboard">Dashboard</a></li>
                <li class="breadcrumb-item active">Resident Profile</li>
            </ol>
        </nav>
    </div><!-- End Page Title -->

    <section class="section profile">
        <div class="row">

            <div class="col-xl-4">
                <div class="card">
                    <div class="card-body profile-card pt-4 d-flex flex-column align-items-center">
                        <img src="/assets/img/avatar.png" alt="Profile" class="rounded-circle">
                        <h2 class="text-capitalize">{{resident.firstName}} {{resident.lastName}}</h2>
                        <h2 class="text-capitalize mb-3 text-secondary">#{{resident.residentID}}</h2>
                        <h3>KDOC Resident</h3>
                    </div>
                </div>
            </div>

            <div class="col-xl-8">

                <div class="card">
                    <div class="card-body pt-3">
                        <!--========= Tab Borders =======-->
                        <ul class="nav nav-tabs nav-tabs-bordered">
                            <li class="nav-item">
                                <button class="nav-link {{#if (eq activeTab 'overview')}}active{{/if}}"
                                    data-bs-toggle="tab" data-bs-target="#profile-overview">Overview</button>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link {{#if (eq activeTab 'resume')}}active{{/if}}"
                                    data-bs-toggle="tab" data-bs-target="#profile-resume">Resume</button>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link {{#if (eq activeTab 'application')}}active{{/if}}"
                                    data-bs-toggle="tab" data-bs-target="#profile-applications">{{#if
                                    resident.isHired}}Employment{{else}}Applications{{/if}}</button>
                            </li>
                        </ul>
                        {{!--===== TABS =====--}}
                        <div class="tab-content pt-2">
                            {{!--===== Resident Overview Tab =====--}}
                            <div class="tab-pane fade {{#if (eq activeTab 'overview')}}show active{{/if}} profile-overview pt-3"
                                id="profile-overview">

                                <h5 class="card-title">Resident Information</h5>
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 label ">Name</div>
                                    <div class="col-lg-8 col-md-8 text-capitalize">{{resident.firstName}}
                                        {{resident.lastName}}</div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 label">Resident ID</div>
                                    <div class="col-lg-8 col-md-8">{{resident.residentID}}</div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 label">Facility</div>
                                    <div class="col-lg-8 col-md-8 text-capitalize">{{resident.facility}}</div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 label">Custody Level</div>
                                    <div class="col-lg-8 col-md-8 text-capitalize">{{resident.custodyLevel}}</div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 label">Job Pool</div>
                                    <div class="col-lg-8 col-md-8 text-capitalize">{{resident.jobPool}}</div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 label">Out Date</div>
                                    <div class="col-lg-8 col-md-8 text-capitalize">01/13/2025</div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 label">Unit Team</div>
                                    <div class="col-lg-8 col-md-8 text-capitalize">{{resident.unitTeam}}</div>
                                </div>
                            </div>

                            {{!-- Resume --}}
                            <div class="tab-pane fade {{#if (eq activeTab 'resume')}}show active{{/if}} profile-resume pt-3"
                                id="profile-resume">

                                {{!-- Resident First Name --}}
                                <div class="row mb-3">
                                    <label for="firstName" class="col-md-4 col-lg-3 col-form-label">First
                                        Name</label>
                                    <div class="col-md-8 col-lg-9">
                                        <input name="firstName" type="text" class="form-control text-capitalize"
                                            id="firstName" value="{{resident.firstName}}" disabled>
                                    </div>
                                </div>
                                {{!-- Resident Last Name --}}
                                <div class="row mb-3">
                                    <label for="lastName" class="col-md-4 col-lg-3 col-form-label">Last
                                        Name</label>
                                    <div class="col-md-8 col-lg-9">
                                        <input name="lastName" type="text" class="form-control text-capitalize"
                                            id="lastName" value="{{resident.lastName}}" disabled>
                                    </div>
                                </div>
                                {{!-- Resident ID --}}
                                <div class="row mb-3">
                                    <label for="residentID" class="col-md-4 col-lg-3 col-form-label">Resident
                                        ID</label>
                                    <div class="col-md-8 col-lg-9">
                                        <input name="residentID" type="text" class="form-control text-capitalize"
                                            id="residentID" value="{{resident.residentID}}" disabled>
                                    </div>
                                </div>
                                {{!-- Resident Custody Level --}}
                                <div class="row mb-3">
                                    <label for="custodyLevel" class="col-md-4 col-lg-3 col-form-label">Custody
                                        Level</label>
                                    <div class="col-md-8 col-lg-9">
                                        <input name="custodyLevel" type="text" class="form-control text-capitalize"
                                            id="custodyLevel" value="{{resident.custodyLevel}}" disabled>
                                    </div>
                                </div>
                                {{!-- Resident Facility --}}
                                <div class="row mb-3">
                                    <label for="facility" class="col-md-4 col-lg-3 col-form-label">Facility</label>
                                    <div class="col-md-8 col-lg-9">
                                        <input name="facility" type="text" class="form-control text-capitalize"
                                            id="facility" value="{{resident.facility}}" disabled>
                                    </div>
                                </div>
                                {{!-- Unit Team Assigned --}}
                                <div class="row mb-3">
                                    <label for="unitTeam" class="col-md-4 col-lg-3 col-form-label">Unit Team</label>
                                    <div class="col-md-8 col-lg-9">
                                        <input name="unitTeam" type="text" class="form-control text-capitalize"
                                            id="unitTeam" value="{{resident.unitTeam}}" disabled>
                                    </div>
                                </div>
                                {{!-- work history input --}}
                                <div class="row mb-3">
                                    <label for="workHistory" class="col-md-4 col-lg-3 col-form-label">Work
                                        History</label>
                                    <div class="col-md-8 col-lg-9">
                                        <textarea name="workHistory" class="form-control" id="workHistory"
                                            style="height: 100px" disabled>{{resident.resume.workHistory}}</textarea>
                                    </div>
                                </div>
                                {{!-- Certifications & Licenses input --}}
                                <div class="row mb-3">
                                    <label for="certifications" class="col-md-4 col-lg-3 col-form-label">Certifications
                                        &amp;
                                        Licenses</label>
                                    <div class="col-md-8 col-lg-9">
                                        <textarea name="certifications" class="form-control" id="certifications"
                                            style="height: 100px" disabled>{{resident.resume.certifications}}</textarea>
                                    </div>
                                </div>
                                {{!-- Higher Education --}}
                                <div class="row mb-3">
                                    <label for="education" class="col-md-4 col-lg-3 col-form-label">Higher
                                        Education</label>
                                    <div class="col-md-8 col-lg-9">
                                        <textarea name="education" class="form-control" id="education"
                                            style="height: 100px" disabled>{{resident.resume.education}}</textarea>
                                    </div>
                                </div>
                                {{!-- Relevant Skills --}}
                                <div class="row mb-3">
                                    <label for="skills" class="col-md-4 col-lg-3 col-form-label">Relevant Skills
                                        &amp;
                                        Experience</label>
                                    <div class="col-md-8 col-lg-9">
                                        <textarea name="skills" class="form-control" id="skills" style="height: 100px"
                                            disabled>{{resident.resume.skills}}</textarea>
                                    </div>
                                </div>
                                {{!-- US Citizen options --}}
                                <div class="row mb-3">
                                    <label for="legalCitizen" class="col-md-4 col-lg-3 col-form-label">U.S.
                                        Citizen</label>
                                    <div class="col-sm-10">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="legalCitizen"
                                                id="legalCitizen1" value="true" {{#if resident.resume.legalCitizen}}
                                                checked{{/if}} disabled>
                                            <label class="form-check-label" for="legalCitizen1">
                                                Yes
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="legalCitizen"
                                                id="legalCitizen2" value="false" {{#if (eq resident.resume.legalCitizen
                                                false)}}checked{{/if}} disabled>
                                            <label class="form-check-label" for="legalCitizen2">
                                                No
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                {{!-- GED or diploma option --}}
                                <div class="row mb-3">
                                    <label for="hsGraduate" class=" col-form-label">GED or High
                                        School Diploma</label>
                                    <div class="col-sm-10">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="hsGraduate"
                                                id="hsGraduate1" value="true" {{#if resident.resume.hsGraduate}}
                                                checked{{/if}} disabled>
                                            <label class="form-check-label" for="hsGraduate1">
                                                Yes
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="hsGraduate"
                                                id="hsGraduate2" value="false" {{#if (eq resident.resume.hsGraduate
                                                false)}}checked{{/if}} disabled>
                                            <label class="form-check-label" for="hsGraduate2">
                                                No
                                            </label>
                                        </div>
                                    </div>
                                </div>




                            </div>
                            {{!--======== Applications TAB ========--}}
                            <div class="tab-pane fade {{#if (eq activeTab 'application')}}show active{{/if}} profile-applications pt-3"
                                id="profile-applications">
                                <div class="card">
                                    <div class="card-body pt-3">
                                        {{#if applications}}
                                        <div class="row mt-3 mb-3">
                                            <div class="col-lg-3 col-md-3 label text-muted">
                                                Company</div>
                                            <div class="col-lg-3 col-md-3 label text-muted">
                                                Position</div>
                                            <div class="col-lg-2 col-md-2 text-muted">
                                                Pay</div>
                                        </div>
                                        {{#each applications}}
                                        <div class="row mt-3">
                                            <div class="col-lg-3 col-md-3 label text-capitalize">
                                                {{this.companyName}}
                                            </div>
                                            <div class="col-lg-3 col-md-3 label text-capitalize">
                                                {{this.position}}
                                            </div>
                                            <div class="col-lg-2 col-md-2">
                                                ${{this.pay}} /hr</div>
                                            <div class="col-lg-4 col-md-4">
                                                <button class="btn btn-primary" type="button" data-bs-toggle="modal"
                                                    data-bs-target="#{{this._id}}">
                                                    Manage Hiring</button>
                                            </div>
                                        </div>
                                        <hr>
                                        {{/each}}
                                        {{else}}
                                        {{#if resident.isHired}}
                                        <span class="text-success">Resident is currently employed as of {{formatDate
                                            resident.dateHired}}
                                        </span>
                                        <hr>
                                        <button class="btn btn-danger" type="button" data-bs-toggle="modal"
                                            data-bs-target="#terminate">
                                            Terminate Employment</button>

                                        {{else}}
                                        <span class="text-warning">Resident has completed no applications.
                                        </span>
                                        {{/if}}
                                        {{/if}}
                                    </div>
                                </div>
                            </div>
                        </div><!-- End Bordered Tabs -->
                    </div>
                </div>
            </div>
        </div>
    </section>
</main><!-- End #main -->


<!-- ======= Footer ======= -->
{{> footer}}
{{> arrowUp}}


{{#each applications}}
{{!-- View Application Modal --}}
<div class="modal fade" id="{{this._id}}" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content p-2">

            <div class="modal-header row">

                <div class="col-6">
                    <h5 id="request-title" class="modal-title text-center text-capitalize">{{../resident.firstName}}
                        {{../resident.lastName}}</h5>
                </div>
                {{#if (isResidentInInterviews ../resident.residentID this.interviews)}}
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                {{else}}
                <div class="col-6">
                    <button type="button" class="btn btn-info mx-2" data-bs-toggle="modal"
                        data-bs-target="#{{this._id}}2">Request
                        Interview</button>
                </div>
                {{/if}}

            </div>

            <div class="modal-body">

                <div class="row mb-2">
                    <div class="col-lg-4 col-md-4 label text-info">Resident ID:</div>
                    <div class="col-lg-8 col-md-8">{{../resident.residentID}}</div>
                </div>
                <div class="row mb-2">
                    <div class="col-lg-4 col-md-4 label text-info">Facility:</div>
                    <div class="col-lg-8 col-md-8 text-capitalize">{{../resident.facility}}</div>
                </div>
                <div class="row mb-2">
                    <div class="col-lg-4 col-md-4 label text-info">Custody Level:</div>
                    <div class="col-lg-8 col-md-8 text-capitalize">{{../resident.custodyLevel}}</div>
                </div>
                <div class="row mb-2">
                    <div class="col-lg-4 col-md-4 label text-info">Out Date:</div>
                    <div class="col-lg-8 col-md-8 text-capitalize">{{formatDate ../resident.outDate}}</div>
                </div>
                <hr>
                <div class="row mb-2">
                    <div class="col-lg-4 col-md-4 label text-info">Company:</div>
                    <div class="col-lg-8 col-md-8 text-capitalize">{{this.companyName}}</div>
                </div>
                <div class="row mb-2">
                    <div class="col-lg-4 col-md-4 label text-info">Position:</div>
                    <div class="col-lg-8 col-md-8 text-capitalize">{{this.position}}</div>
                </div>
                <div class="row mb-2">
                    <div class="col-lg-4 col-md-4 label text-info">Pay:</div>
                    <div class="col-lg-8 col-md-8 text-capitalize">${{this.pay}}/hr</div>
                </div>
                <hr>
                <div class="row mb-2">
                    <div class="col-lg-6 col-md-6 label text-info">Interview Requested On:</div>
                    {{#getInterview ../resident.residentID this.interviews}}
                    <div class="col-lg-6 col-md-6">{{formatDate dateRequested}}</div>
                    {{else}}
                    <div class="col-lg-6 col-md-6">No</div>
                    {{/getInterview}}
                </div>

                <div class="row mb-2">
                    <div class="col-lg-6 col-md-6 label text-info">Interview Scheduled For:</div>
                    {{#getInterview ../resident.residentID this.interviews}}
                    {{#if dateScheduled}}
                    <div class="col-lg-6 col-md-6">{{formatDate dateScheduled}} &nbsp; @ &nbsp; {{time}}</div>
                    {{else}}
                    <div class="col-lg-6 col-md-6">No</div>
                    {{/if}}
                    {{else}}
                    <div class="col-lg-6 col-md-6">No</div>
                    {{/getInterview}}
                </div>
                <hr>
                <div class="row mb-2">
                    <div class="col-lg-6 col-md-6 label text-info">Employment Requested:</div>
                    {{#getApplication ../resident._id this.applicants}}
                    {{#if hireRequest}}
                    <div class="col-lg-6 col-md-6">{{formatDate hireRequestDate}}</div>
                    {{else}}
                    <div class="col-lg-6 col-md-6">No</div>
                    {{/if}}
                    {{else}}
                    <div class="col-lg-6 col-md-6">No</div>
                    {{/getApplication}}
                </div>



            </div>
            <div class="modal-footer">
                <div class="col-12 d-flex justify-content-between">
                    <a href="/employer/rejectHire/{{../resident._id}}/{{this._id}}"><button type="button"
                            class="btn btn-danger mx-2">Reject Hire</button></a>
                    {{#getApplication ../resident._id this.applicants}}
                    {{#if hireRequest}}
                    <p>Employment Requested</p>
                    {{else}}
                    <button type="button" data-bs-toggle="modal" data-bs-target="#{{../this._id}}3"
                        class="btn btn-success mx-2">Request
                        Hire</button>
                    {{/if}}
                    {{else}}
                    <button type="button" data-bs-toggle="modal" data-bs-target="#{{../this._id}}3"
                        class="btn btn-success mx-2">Request
                        Hire</button>
                    {{/getApplication}}



                </div>
            </div>

        </div>
    </div>
</div>

{{!-- Request Interview Modal --}}
<div class="modal fade" id="{{this._id}}2" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content p-2">

            <div class="modal-header">

                <h3 id="request-title" class="modal-title">
                    Request Interview
                </h3>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form method="POST" action="/employer/requestInterview/{{this._id}}">
                <div class="modal-body">

                    <div class="row mb-3">
                        <label for="name" class="col-sm-3 col-form-label">Resident</label>
                        <div class="col-sm-9">
                            <input required type="text" class="form-control text-capitalize" readonly
                                value="{{../resident.firstName}} {{../resident.lastName}}">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label for="name" class="col-sm-3 col-form-label">Resident ID</label>
                        <div class="col-sm-9">
                            <input required type="text" class="form-control" name="residentID" readonly
                                value="{{../resident.residentID}}">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label for="unitTeam" class="col-sm-3 col-form-label">Unit Team</label>
                        <div class="col-sm-9">
                            <input required type="text" class="form-control text-capitalize" name="unitTeam" readonly
                                value="{{../resident.unitTeam}}">
                        </div>
                    </div>

                    <input type="hidden" name="email" value="{{../resident.resume.unitTeam}}">

                    <div class="row mt-3 mb-3">
                        <label for="preferences" class="col-12 col-form-label">Time / Date / Place Preferences:</label>
                        <div class="col-12">
                            <textarea class="form-control" style="height: 100px" name="preferences"
                                placeholder="Optional"></textarea>
                        </div>
                    </div>
                    <div class="row mt-3 mb-3">
                        <label for="additionalNotes" class="col-12 col-form-label">Additional Information:</label>
                        <div class="col-12">
                            <textarea class="form-control" style="height: 100px" name="additionalNotes"
                                placeholder="Optional"></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="col-12 d-flex justify-content-between">
                        <button type="button" class="btn btn-secondary mx-2" data-bs-dismiss="modal"
                            aria-label="Close">Cancel</button>
                        <button type="submit" class="btn btn-info mx-2">Request</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>


{{!-- Request Hire Modal --}}
<div class="modal fade" id="{{this._id}}3" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content p-2">

            <div class="modal-header">

                <h3 id="request-title" class="modal-title">
                    Request Employment
                </h3>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form method="POST" action="/employer/requestHire/{{this._id}}">
                <div class="modal-body">
                    <div class="row mb-3">
                        {{!-- Resident Name --}}
                        <label for="name" class="col-3 col-form-label">Resident</label>
                        <div class="col-9">
                            <input required type="text" class="form-control text-capitalize" readonly
                                value="{{../resident.firstName}} {{../resident.lastName}}">
                        </div>
                    </div>
                    {{!-- Resident ID # --}}
                    <div class="row mb-3">
                        <label for="name" class="col-3 col-form-label">ID #</label>
                        <div class="col-9">
                            <input required type="text" class="form-control" name="residentID" readonly
                                value="{{../resident.residentID}}">
                        </div>
                    </div>
                    {{!-- Resident Unit Team --}}
                    <div class="row mb-3">
                        <label for="name" class="col-3 col-form-label">Unit Team</label>
                        <div class="col-9">
                            <input required type="text" class="form-control text-capitalize" name="unitTeamName"
                                readonly value="{{../resident.unitTeam}}">
                        </div>
                    </div>

                    <hr>

                    <div class="row mb-3">
                        <label for="hireRequestStartDate" class="col-12 col-form-label">Select Start Date</label>
                        <div class="col-sm-12">
                            <input required type="date" class="form-control" name="hireRequestStartDate">
                        </div>
                    </div>



                    <input type="hidden" name="unitTeamEmail" value="{{../resident.resume.unitTeam}}">

                    <div class="row mt-3 mb-3">
                        <label for="hireRequestInfo" class="col-12 col-form-label">Additional Information:</label>
                        <div class="col-12">
                            <textarea class="form-control" style="height: 100px" name="hireRequestInfo"
                                placeholder="Optional notes or comments."></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="col-12 d-flex justify-content-between">
                        <button type="button" class="btn btn-secondary mx-2" data-bs-dismiss="modal"
                            aria-label="Close">Cancel</button>
                        <button type="submit" class="btn btn-info mx-2">Request</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{{/each}}


{{!-- Terminate Resident Modal --}}
<div class="modal fade" id="terminate" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="post" action="/employer/requestTermination/{{resident._id}}">
                <div class="modal-header">
                    <h5 class="modal-title">Request Termination</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-3">
                        <div class="col-sm-10">
                            <select required name="terminationReason" id="terminationReason" class="form-select"
                                aria-label="Termination reason">
                                <option selected value="">Select reason for termination:
                                </option>
                                <option value="Release from KDOC">Release from KDOC</option>
                                <option value="Poor Performance">Poor Performance</option>
                                <option value="Misconduct">Misconduct</option>
                                <option value="Attendance Issues">Attendance Issues</option>
                                <option value="layoffs">Layoffs</option>
                                <option value="Medical Layoff">Medical Layoff</option>
                                <option value="Loss of Custody">Loss of Custody</option>
                                <option value="Changed Facility">Changed Facility</option>
                                <option value="PI Time Limitations">PI Time Limitations</option>
                                <option value="Other">Other - Provide Details Below</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-10">
                            <textarea name="notes" class="form-control" placeholder="Additional notes and comments"
                                style="height: 100px;"></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="col-12 d-flex justify-content-between">
                        <button type="button" class="btn btn-secondary mx-2" data-bs-dismiss="modal"
                            aria-label="Close">Cancel</button>
                        <button type="submit" class="btn btn-danger mx-2">Request Termination</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>